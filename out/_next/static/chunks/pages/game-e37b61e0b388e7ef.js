(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[203],{134:function(n,t,r){(window.__NEXT_P=window.__NEXT_P||[]).push(["/game",function(){return r(8528)}])},8528:function(n,t,r){"use strict";r.r(t),r.d(t,{default:function(){return nR}});var e,i,o,u,a,c,l,s=r(5893),f=r(9473),d=r(7297),h=r(4924),v=r(6042),p=r(9396),g=r(828),m=r(6305),b=r(6741),Z=r(7294);function w(n){var t=[],r=!0,e=!1,i=void 0;try{for(var o,u=n[Symbol.iterator]();!(r=(o=u.next()).done);r=!0){var a=o.value;null!==a&&(t=(0,m.Z)(t).concat([a]))}}catch(c){e=!0,i=c}finally{try{r||null==u.return||u.return()}finally{if(e)throw i}}return t}function y(n,t){return w(n.map(t))}function I(n){return Array.from(Array(n).keys())}var x=f.I0,C=f.v9,V={slots:I(32).map(function(n){return null})},P=(0,b.oM)({name:"boardState",initialState:V,reducers:{movePiece:function(n,t){var r=n.slots[t.payload.from];n.slots[t.payload.from]=null,n.slots[t.payload.to]=r}}}),S=function(){return C(function(n){return n.boardState.slots})},j=function(){var n=(0,g.Z)((0,Z.useState)(null),2),t=n[0],r=n[1],e=(0,g.Z)((0,Z.useState)([]),2),i=e[0],o=e[1],u=(0,g.Z)((0,Z.useState)([]),2),a=u[0],c=u[1],l=S(),s=x(),f=(0,Z.useCallback)(function(){r(null),o([]),c([])},[r,o]),d=(0,Z.useCallback)(function(n){var t,e=null!==(t=l[n])&&void 0!==t?t:null;if(null!==e){r(n);var i=e.getValidPositions(n),u=e.getValidCaptures(n);o(y(i,function(n){var t=[],r=!0,e=!1,i=void 0;try{for(var o,u=n[Symbol.iterator]();!(r=(o=u.next()).done);r=!0){var a=o.value;if(null!==l[a])break;t=(0,m.Z)(t).concat([a])}}catch(c){e=!0,i=c}finally{try{r||null==u.return||u.return()}finally{if(e)throw i}}return t}).flatMap(function(n){return n}).reduce(function(n,t){return(0,p.Z)((0,v.Z)({},n),(0,h.Z)({},t,!0))},{})),c(y(u,function(n){var t=!0,r=!1,i=void 0;try{for(var o,u=n[Symbol.iterator]();!(t=(o=u.next()).done);t=!0){var a=o.value,c=l[a];if(null!==c){if(!e.isPieceOnOppositeTeam(c))break;return[a]}}}catch(s){r=!0,i=s}finally{try{t||null==u.return||u.return()}finally{if(r)throw i}}return[]}).flatMap(function(n){return n}).reduce(function(n,t){return(0,p.Z)((0,v.Z)({},n),(0,h.Z)({},t,!0))},{}))}},[r,o,l]),b=(0,Z.useCallback)(function(n){f(),null!==t&&s(P.actions.movePiece({from:t,to:n}))},[f,s,t]),w=(0,Z.useCallback)(function(n){return i.hasOwnProperty(n)},[i]);return{actionClearSelection:f,actionMovePiece:b,actionSelectPiece:d,checkIsCaptureValid:(0,Z.useCallback)(function(n){return a.hasOwnProperty(n)},[i]),checkIsPosValid:w}};function k(n){return n.length>0}function T(n){return[z(n%4),Q(Math.floor(n/4))]}function W(n,t){return y(I((0,g.Z)(T(n),1)[0]).map(z),t)}function M(n,t){return y(I(4-(0,g.Z)(T(n),1)[0]-1).map(z),t)}function O(n,t){var r=(0,g.Z)(T(n),2);return y(I((r[0],r[1])).map(Q),t)}function J(n,t){var r=(0,g.Z)(T(n),2);return y(I(8-(r[0],r[1])-1).map(Q),t)}function G(n){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return _(n,[-((t+1)*1),0])}function L(n){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return _(n,[t+1,0])}function Y(n){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return _(n,[0,-((t+1)*1)])}function F(n){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return _(n,[0,t+1])}function N(n){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return _(n,[-((t+1)*1),-((t+1)*1)])}function E(n){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return _(n,[t+1,-((t+1)*1)])}function H(n){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return _(n,[-((t+1)*1),t+1])}function X(n){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return _(n,[t+1,t+1])}function _(n,t){var r,e=(0,g.Z)(T(n),2),i=e[0],o=e[1],u=(0,g.Z)(t,2),a=u[0],c=u[1];return a>0&&i+a>=4||a<0&&i+a<0||c>0&&o+c>=8||c<0&&o+c<0?null:K((r=[z(i+a),Q(o+c)])[0]+4*r[1])}function R(n){return w(n).map(function(n){return[n]})}function U(n){return w(n.map(w).filter(k))}function K(n){if(0===n||1===n||2===n||3===n||4===n||5===n||6===n||7===n||8===n||9===n||10===n||11===n||12===n||13===n||14===n||15===n||16===n||17===n||18===n||19===n||20===n||21===n||22===n||23===n||24===n||25===n||26===n||27===n||28===n||29===n||30===n||31===n)return n;throw Error('Method "castPos" casted an invalid coordinate number.')}function z(n){if(0===n||1===n||2===n||3===n)return n;throw Error('Method "castX" casted an invalid coordinate number.')}function Q(n){if(0===n||1===n||2===n||3===n||4===n||5===n||6===n||7===n)return n;throw Error('Method "castY" casted an invalid coordinate number.')}P.reducer;var B=r(9521);(e=u||(u={}))[e.One=1]="One",e[e.Two=2]="Two";var A=u;function q(){var n=(0,d.Z)(["\n        background-color: #f5e0b7;\n      "]);return q=function(){return n},n}function D(){var n=(0,d.Z)(["\n          background-color: #0081a7;\n        "]);return D=function(){return n},n}function $(){var n=(0,d.Z)(["\n          background-color: #f07167;\n        "]);return $=function(){return n},n}function nn(){var n=(0,d.Z)(["\n  border: 1px solid #191919;\n  border-radius: 50%;\n  cursor: pointer;\n  height: 60px;\n  width: 60px;\n\n  ","\n"]);return nn=function(){return n},n}function nt(){var n=(0,d.Z)(["\n  left: 50%;\n  position: relative;\n  top: 50%;\n  transform: translateY(-50%) translateX(-50%);\n  width: fit-content;\n"]);return nt=function(){return n},n}var nr=B.ZP.div(nn(),function(n){var t=n.isHighlighted,r=n.team;if(t)return(0,B.iv)(q());switch(r){case A.One:return(0,B.iv)(D());case A.Two:return(0,B.iv)($())}}),ne=B.ZP.div(nt());function ni(n){var t=n.isHighlighted,r=n.onClick,e=n.piece;return(0,s.jsx)(nr,{isHighlighted:void 0!==t&&t,onClick:r,team:e.getTeam(),children:(0,s.jsx)(ne,{children:e.getName()})})}function no(){var n=(0,d.Z)(["\n  background-color: #f5e0b7;\n  border: 1px solid #191919;\n  border-radius: 50%;\n  cursor: pointer;\n  height: 40px;\n  width: 40px;\n"]);return no=function(){return n},n}var nu=B.ZP.div(no());function na(n){var t=n.onClick;return(0,s.jsx)(nu,{onClick:t})}function nc(){var n=(0,d.Z)(["\n          background-color: #4d6d92;\n        "]);return nc=function(){return n},n}function nl(){var n=(0,d.Z)(["\n          background-color: #ececd7;\n        "]);return nl=function(){return n},n}function ns(){var n=(0,d.Z)(["\n  height: 80px;\n  position: relative;\n  width: 80px;\n\n  ","\n"]);return ns=function(){return n},n}(i=a||(a={}))[i.Positive=1]="Positive",i[i.Negative=2]="Negative";var nf=B.ZP.div(ns(),function(n){switch(n.colorType){case a.Positive:return(0,B.iv)(nc());case a.Negative:return(0,B.iv)(nl())}});function nd(n){var t=n.children,r=n.color,e=n.onClick;return(0,s.jsx)(nf,{colorType:r,onClick:e,children:void 0===t?null:t})}function nh(){var n=(0,d.Z)(["\n  left: 50%;\n  position: relative;\n  top: 50%;\n  transform: translateY(-50%) translateX(-50%);\n  width: fit-content;\n"]);return nh=function(){return n},n}var nv=B.ZP.div(nh());function np(n){var t=n.children;return(0,s.jsx)(nv,{children:void 0===t?null:t})}var ng={currentTurn:A.Two,winner:null},nm=(0,b.oM)({name:"gameState",initialState:ng,reducers:{advanceTurn:function(n){var t=n.currentTurn;n.currentTurn=function(n){switch(n){case A.One:return A.Two;case A.Two:return A.One}}(t)},setWinner:function(n,t){n.winner=t.payload}}}),nb=function(){return C(function(n){return n.gameState.currentTurn})},nZ=function(){return C(function(n){return n.gameState.winner})},nw=function(){var n=x();return(0,Z.useCallback)(function(){return n(nm.actions.advanceTurn())},[n])},ny=function(){var n=S(),t=x();(0,Z.useEffect)(function(){n.map(function(n){return(null==n?void 0:n.getTeam())===A.One&&(null==n?void 0:n.getName())==="King"}).every(function(n){return!1===n})&&t(nm.actions.setWinner(A.Two)),n.map(function(n){return(null==n?void 0:n.getTeam())===A.Two&&(null==n?void 0:n.getName())==="King"}).every(function(n){return!1===n})&&t(nm.actions.setWinner(A.One))},[t,n])};function nI(){var n=(0,d.Z)(["\n  border: 1px solid #191919;\n  display: grid;\n  grid-template-columns: 1fr 1fr 1fr 1fr;\n  height: 640px;\n  left: 50%;\n  position: relative;\n  top: 50%;\n  transform: translateY(-50%) translateX(-50%);\n  width: 320px;\n"]);return nI=function(){return n},n}nm.reducer;var nx=B.ZP.div(nI());function nC(){var n=S(),t=j(),r=t.actionMovePiece,e=t.actionSelectPiece,i=t.checkIsCaptureValid,o=t.checkIsPosValid,u=nb(),c=nZ(),l=nw();return ny(),(0,s.jsx)(nx,{children:I(32).map(K).map(function(t){var f,d=null!==(f=n[t])&&void 0!==f?f:null;return(0,s.jsxs)(nd,{color:(Math.floor(t/4)%2==0?t+1:t)%2==0?a.Positive:a.Negative,children:[o(t)&&null===d&&(0,s.jsx)(np,{children:(0,s.jsx)(na,{onClick:function(){r(t),l()}})}),null!==d&&(0,s.jsx)(np,{children:(0,s.jsx)(ni,{isHighlighted:i(t),onClick:function(){if(i(t)){r(t),l();return}d.getTeam()===u&&null===c&&e(t)},piece:d})})]},t)})})}(0,b.xC)({reducer:{boardState:P.reducer,gameState:nm.reducer}});var nV=r(8764),nP=r(1438),nS=r(8029),nj=r(6567);(o=c||(c={}))[o.Leader=1]="Leader",o[o.Infantry=2]="Infantry",o[o.Minor=3]="Minor",o[o.Major=4]="Major",o[o.Hero=5]="Hero";var nk=c,nT=function(){function n(t,r,e){(0,nP.Z)(this,n),this.classification=r,this.name=t,this.team=e}var t=n.prototype;return t.getClassification=function(){return this.classification},t.getName=function(){return this.name},t.getTeam=function(){return this.team},t.getSerializedObj=function(){return{classification:this.classification,name:this.name,team:this.team}},t.isPieceOnOppositeTeam=function(n){return this.team!==n.team},t.getValidPositions=function(n){throw Error('Method "getValidPositions()" must be implemented.')},t.getValidCaptures=function(n){throw Error('Method "getValidCaptures()" must be implemented.')},n}(),nW=function(n){(0,nS.Z)(r,n);var t=(0,nj.Z)(r);function r(n){return(0,nP.Z)(this,r),t.call(this,"Jester",nk.Infantry,n)}var e=r.prototype;return e.getValidPositions=function(n){return R([K(Math.random()%31)])},e.getValidCaptures=function(n){return this.getValidPositions(n)},r}(nT),nM=function(n){(0,nS.Z)(r,n);var t=(0,nj.Z)(r);function r(n){return(0,nP.Z)(this,r),t.call(this,"Jumper",nk.Minor,n)}var e=r.prototype;return e.getValidPositions=function(n){return R([N(n,1),Y(n,1),E(n,1),L(n,1),H(n,1),F(n,1),X(n,1),G(n,1)])},e.getValidCaptures=function(n){return this.getValidPositions(n)},r}(nT),nO=function(n){(0,nS.Z)(r,n);var t=(0,nj.Z)(r);function r(n){return(0,nP.Z)(this,r),t.call(this,"Miner",nk.Infantry,n)}var e=r.prototype;return e.getValidPositions=function(n){return R([Y(n)])},e.getValidCaptures=function(n){return R([Y(n,1)])},r}(nT),nJ=function(n){(0,nS.Z)(r,n);var t=(0,nj.Z)(r);function r(n){return(0,nP.Z)(this,r),t.call(this,"Ninja",nk.Infantry,n)}var e=r.prototype;return e.getValidPositions=function(n){return R([N(n),E(n)])},e.getValidCaptures=function(n){return R([G(n),L(n),F(n)])},r}(nT),nG=function(n){(0,nS.Z)(r,n);var t=(0,nj.Z)(r);function r(n){return(0,nP.Z)(this,r),t.call(this,"Samurai",nk.Major,n)}var e=r.prototype;return e.getValidPositions=function(n){return function(){for(var n=arguments.length,t=Array(n),r=0;r<n;r++)t[r]=arguments[r];var e=(0,g.Z)(t,2),i=e[0],o=e[1];return i.concat.apply(i,(0,m.Z)(o))}(R([G(n),L(n),F(n)]),U([O(n,function(t){return Y(n,t)}),W(n,function(t){return N(n,t)}),M(n,function(t){return E(n,t)})]))},e.getValidCaptures=function(n){return this.getValidPositions(n)},r}(nT),nL=function(n){(0,nS.Z)(r,n);var t=(0,nj.Z)(r);function r(n){return(0,nP.Z)(this,r),t.call(this,"Bishop",nk.Minor,n)}var e=r.prototype;return e.getValidPositions=function(n){return[W(n,function(t){return N(n,t)}),M(n,function(t){return E(n,t)}),W(n,function(t){return H(n,t)}),M(n,function(t){return X(n,t)})]},e.getValidCaptures=function(n){return this.getValidPositions(n)},r}(nT),nY=function(n){(0,nS.Z)(r,n);var t=(0,nj.Z)(r);function r(n){return(0,nP.Z)(this,r),t.call(this,"King",nk.Leader,n)}var e=r.prototype;return e.getValidPositions=function(n){return R([N(n),Y(n),E(n),L(n),H(n),F(n),X(n),G(n)])},e.getValidCaptures=function(n){return this.getValidPositions(n)},r}(nT),nF=function(n){(0,nS.Z)(r,n);var t=(0,nj.Z)(r);function r(n){return(0,nP.Z)(this,r),t.call(this,"Knight",nk.Minor,n)}var e=r.prototype;return e.getValidPositions=function(n){return R([_(n,[-1,-2]),_(n,[-2,-1]),_(n,[-1,2]),_(n,[-2,1]),_(n,[1,-2]),_(n,[2,-1]),_(n,[1,2]),_(n,[2,1])])},e.getValidCaptures=function(n){return this.getValidPositions(n)},r}(nT),nN=function(n){(0,nS.Z)(r,n);var t=(0,nj.Z)(r);function r(n){return(0,nP.Z)(this,r),t.call(this,"Pawn",nk.Infantry,n)}var e=r.prototype;return e.getValidPositions=function(n){var t=(0,g.Z)(T(n),2),r=(t[0],t[1]);return U([this.getTeam()===A.Two?y(I(6===r?2:1),function(t){return Y(n,t)}):[],this.getTeam()===A.One?y(I(1===r?2:1),function(t){return F(n,t)}):[]])},e.getValidCaptures=function(n){return R([this.getTeam()===A.Two?N(n):null,this.getTeam()===A.Two?E(n):null,this.getTeam()===A.One?X(n):null,this.getTeam()===A.One?H(n):null])},r}(nT),nE=function(n){(0,nS.Z)(r,n);var t=(0,nj.Z)(r);function r(n){return(0,nP.Z)(this,r),t.call(this,"Queen",nk.Hero,n)}var e=r.prototype;return e.getValidPositions=function(n){return U([W(n,function(t){return G(n,t)}),M(n,function(t){return L(n,t)}),O(n,function(t){return Y(n,t)}),J(n,function(t){return F(n,t)}),W(n,function(t){return N(n,t)}),M(n,function(t){return E(n,t)}),W(n,function(t){return H(n,t)}),M(n,function(t){return X(n,t)})])},e.getValidCaptures=function(n){return this.getValidPositions(n)},r}(nT),nH=function(n){(0,nS.Z)(r,n);var t=(0,nj.Z)(r);function r(n){return(0,nP.Z)(this,r),t.call(this,"Rook",nk.Major,n)}var e=r.prototype;return e.getValidPositions=function(n){return U([W(n,function(t){return G(n,t)}),M(n,function(t){return L(n,t)}),O(n,function(t){return Y(n,t)}),J(n,function(t){return F(n,t)})])},e.getValidCaptures=function(n){return this.getValidPositions(n)},r}(nT),nX=(l={},(0,h.Z)(l,A.One,"#0081a7"),(0,h.Z)(l,A.Two,"#f07167"),l);function n_(){var n=nb(),t=nZ();return ny(),(0,s.jsx)("div",{style:{alignItems:"center",boxSizing:"border-box",display:"grid",gridGap:16,gridTemplateColumns:"1fr",height:"fit-content",padding:16,width:"100%"},children:(0,s.jsx)("div",{style:{backgroundColor:nX[null!=t?t:n],boxSizing:"border-box",height:60,padding:16,width:"100%"},children:null!==t?"Winner!":"Current Turn"})})}function nR(){var n,t=(n=JSON.parse(nV.lW.from("W3sibmFtZSI6IlJvb2siLCJ0ZWFtIjoxfSx7Im5hbWUiOiJLaW5nIiwidGVhbSI6MX0seyJuYW1lIjoiS25pZ2h0IiwidGVhbSI6MX0seyJuYW1lIjoiQmlzaG9wIiwidGVhbSI6MX0seyJuYW1lIjoiUGF3biIsInRlYW0iOjF9LHsibmFtZSI6IlBhd24iLCJ0ZWFtIjoxfSx7Im5hbWUiOiJQYXduIiwidGVhbSI6MX0seyJuYW1lIjoiUGF3biIsInRlYW0iOjF9LG51bGwsbnVsbCxudWxsLG51bGwsbnVsbCxudWxsLG51bGwsbnVsbCxudWxsLG51bGwsbnVsbCxudWxsLG51bGwsbnVsbCxudWxsLG51bGwseyJuYW1lIjoiUGF3biIsInRlYW0iOjJ9LHsibmFtZSI6IlBhd24iLCJ0ZWFtIjoyfSx7Im5hbWUiOiJQYXduIiwidGVhbSI6Mn0seyJuYW1lIjoiUGF3biIsInRlYW0iOjJ9LHsibmFtZSI6IkJpc2hvcCIsInRlYW0iOjJ9LHsibmFtZSI6IktuaWdodCIsInRlYW0iOjJ9LHsibmFtZSI6IktpbmciLCJ0ZWFtIjoyfSx7Im5hbWUiOiJSb29rIiwidGVhbSI6Mn1d","base64").toString("ascii")).map(function(n){return null!==n?function(n,t){switch(n){case"Bishop":return new nL(t);case"King":return new nY(t);case"Knight":return new nF(t);case"Pawn":return new nN(t);case"Queen":return new nE(t);case"Rook":return new nH(t);case"Jester":return new nW(t);case"Jumper":return new nM(t);case"Miner":return new nO(t);case"Ninja":return new nJ(t);case"Samurai":return new nG(t)}throw Error('Piece with name "'.concat(n,'" is unimplemented'))}(null==n?void 0:n.name,null==n?void 0:n.team):null}),(0,b.xC)({preloadedState:{boardState:{slots:n}},reducer:{boardState:P.reducer,gameState:nm.reducer}}));return(0,s.jsx)(f.zt,{store:t,children:(0,s.jsxs)("div",{style:{display:"grid",gridTemplateColumns:"1fr auto",height:"100vh",overflowY:"auto",position:"absolute",width:"100vw"},children:[(0,s.jsx)("div",{style:{height:"100%",position:"relative",width:"100%"},children:(0,s.jsx)(nC,{})}),(0,s.jsx)("div",{style:{borderLeft:"1px solid black",height:"100%",width:400},children:(0,s.jsx)(n_,{})})]})})}}},function(n){n.O(0,[774,687,888,179],function(){return n(n.s=134)}),_N_E=n.O()}]);